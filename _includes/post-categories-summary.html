<ul>
{% assign categories_list = site.categories %}
  {%- if categories_list.first[0] == null -%}
    {%- for category in categories_list -%}
      <li><a href="categories/#{{ category | downcase | downcase | url_escape | strip | replace: ' ', '-' }}">{{ category | camelcase }} ({{ site.tags[category].size }})</a></li>
    {%- endfor -%}
  {%- else -%}
    {%- for category in categories_list -%}
      <li><a href="/categories/#{{ category[0] | downcase | url_escape | strip | replace: ' ', '-' }}">{{ category[0] | camelcase }}<span>{{ category[1].size }}</span></a></li>
    {%- endfor -%}
  {%- endif -%}
{% assign categories_list = nil %}
</ul>